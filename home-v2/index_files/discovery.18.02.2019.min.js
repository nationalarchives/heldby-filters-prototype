/*! Minified JavaScript created in Discovery 18.02.2019. 2019-02-18 */

$.fadeToggler=function(e){var t,o;t=$(e.focussedElement),o=$(e.elementToFade),e.milliseconds,Modernizr.testProp("opacity")?(t.focus(function(){o.addClass("shown")}),t.blur(function(){o.removeClass("shown")})):(o.hide(),t.focus(function(){o.fadeIn(500)}),t.blur(function(){o.fadeOut(500)}))},$.polyfillPlaceholder=function(e){var t,o;t=$(e.targetElement),o=t.attr("placeholder"),t.length&&!Modernizr.input.placeholder&&(t.val(o),t.on("focus",function(){t.val()===o&&t.val("")}),t.on("blur",function(){t.val()||t.val(o)}))},$.displayFetchedContent=function(e){var t,o;return t=e.content||!1,o=e.targetElement||!1,!(!t||!o)&&($(o).replaceWith(t),!0)},$.fetchWithAjax=function(e){var t,o;return cacheOrRetrieveSearchTerm(),o=e.targetElement||!1,!(!(t=e.urlToGET||!1)||!t)&&($.ajax({url:t,cache:!1,success:function(e){$.displayFetchedContent({content:e,targetElement:o}),$(document).trigger("homePageUpdated"),cacheOrRetrieveSearchTerm()}}),!0)},$.showExpander=function(){$(".expander").length&&$(".expander").delay(200).slideDown(400)},$.setUpCheckboxTogglers=function(){$("#toggler").length&&($("#toggler").on("change",function(){$("#toggler").prop("checked")?$(".togglee").prop("checked",!0):$(".togglee").prop("checked",!1)}),$(".togglee").on("change",function(){this.checked&&$("#toggler").prop("checked",!0)})),$(".clearTogglees").length&&$(".clearTogglees").on("change",function(){$(".togglee").prop("checked",!1)})},$.customEventer=function(e){var t=e.elementIdOrClass,o=e.eventToWatch,n=e.customEventToTrigger;$(document).on(o,t,function(){$(document).trigger(n)})};var cacheOrRetrieveSearchTerm=function(){cacheOrRetrieveSearchTerm.term||(cacheOrRetrieveSearchTerm.term=""),$("#mainSearch").val()&&(cacheOrRetrieveSearchTerm.term=$("#mainSearch").val()),$("#mainSearch").val(cacheOrRetrieveSearchTerm.term)};function RandomAsset(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=e[Math.floor(Math.random()*e.length)];this.title=t.title||null,this.catRef=t.catRef||null,this.src=t.src||null,this.relatedLink=t.relatedLink||null,this.linkTitle=t.linkTitle||null}}$.setUpRadioRelationships=function(){$(".radioLeader, .squashRadioFollowers").on("change",function(){$(".radioLeader").prop("checked")?$(".radioFollower").prop("checked",!0):$(".inRadioFollowerGroup").prop("checked",!1)}),$(".inRadioFollowerGroup").on("change",function(){$(".radioLeader").prop("checked",!0)})},$.bindToggle=function(e){var n=$.extend({},$.bindToggle.defaults,e);!0===n.hideTargetOnLoad&&$(n.target).hide(),$(document).on("click",n.toggler,function(e){var t,o=$(this);switch(e.preventDefault(),t=!0===n.contextual?$(this).parent().find(n.target):$(n.target),n.type){case"slide":t.slideToggle("fast");break;default:t.toggle()}o.addClass("hasBeenInteractedWith"),o.toggleClass(n.togglerClass)})},$.bindToggle.defaults={togglerClass:"expanded",hideTargetOnLoad:!0,type:!1,contextual:!1},RandomAsset.prototype.backstretchIt=function(e,t){$(e).backstretch(this.src),t&&$(t).html(this.title+" <a href='"+this.relatedLink+"' title='Image of "+this.title+" Catalogue reference: "+this.catRef+"'>"+this.catRef+"</a>")},RandomAsset.prototype.insertAsHTMLImage=function(e,t){$("<img>",{src:this.src,title:this.title}).appendTo($(e)),t&&$(t).html(this.title+" <a href='"+this.relatedLink+"' title='"+this.linkTitle+"'>"+this.catRef+"</a>")},$.toggleDisplayOfElement=function(e){$(e.togglee).toggle(),$(e.toggler).toggleClass("expanded")},$.fn.tabify=function(e){var i=$.extend({},$.fn.tabify.defaults,e);return $('[role="tabpanel"]:not(:first)').hide(),this.eq(0).addClass(i.classForSelectedTab),this.each(function(){var r=$(this),a=r.attr("id");r.on("click",function(e){var t=$('[role="tablist"] li'),o=$('[role="tabpanel"]'),n=$('[aria-labelledby="'+a+'"]');e.preventDefault(),t.removeClass(i.classForSelectedTab).attr("aria-selected",!1),r.addClass(i.classForSelectedTab).attr("aria-selected",!0),o.hide().attr("aria-hidden",!0),n.show().attr("aria-hidden",!1)})})},$.fn.tabify.defaults={classForSelectedTab:"selected"},$.fn.restrictText=function(e){var o=$.extend({},$.fn.restrictText.defaults,e);return o.showHide&&$(document.body).on("click","a.read-more",function(e){var t=$(this),o=t.prev();e.preventDefault(),"Hide"===t.text()?(o.text(o.data("restricted-text")),t.text("Read more")):(o.text(o.data("full-text")),t.text("Hide"))}),this.each(function(){$this=$(this);var e=$this.text();if(e.length>o.restrictTo){$this.data("full-text",e);var t=$this.data("full-text").substring(0,o.restrictTo).lastIndexOf(" ");$this.data("restricted-text",$this.data("full-text").substring(0,t)+"..."),$this.text($this.data("restricted-text")),o.showHide&&$this.after($('<a class="read-more" href="#">Read more</a><div class="clr"></div>'))}})},$.fn.restrictText.defaults={restrictTo:150,showHide:!1};var tnaLogger=function(e){if(console&&console.log)if("string"==typeof e)console.log(e);else for(var t in e)console.log(e[t])},indexOf=function(e){return(indexOf="function"==typeof Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t=-1,o=-1;for(t=0;t<this.length;t++)if(this[t]===e){o=t;break}return o}).call(this,e)};$.fn.filterBehaviours=function(e){var n=$.extend({},$.fn.filterBehaviours.defaults,e),r=0;return $.ariaShow=function(e){e.slideDown(300),e.attr("aria-hidden",!1)},$.ariaHide=function(e){e.slideUp(300),e.attr("aria-hidden",!0)},this.each(function(){var e=$(this),t=e.find(".filter-toggler"),o=e.find(".filter-togglee");t.addClass("expanded"),$.ariaShow(o),++r>n.hideAfter&&(t.toggleClass("expanded"),$.ariaHide(o)),t.on("click",function(e){e.preventDefault(),t.toggleClass("expanded"),!0===t.hasClass("expanded")?$.ariaShow(o):$.ariaHide(o)})})},$.fn.filterBehaviours.defaults={hideAfter:3},tnaSetThisCookie=function(e,t){var o=new Date;o.setTime(o.getTime()+864e5*t),document.cookie=e+"=true;path=/;expires="+o.toGMTString()+";"},tnaCheckForThisCookie=function(e){return-1!==document.cookie.indexOf(e)},$(document).on("click","#cookieCutter",function(e){e.preventDefault(),tnaSetThisCookie("dontShowCookieNotice",365),$(".cookieNotice").hide()}),$.bindToggle({toggler:"#mega-menu-pull-down button",target:".mega-menu",type:"slide"}),$.bindToggle({toggler:"#search-expander",target:"#mobile-search-outer-wrapper",type:"slide"}),$.bindToggle({toggler:"#show-more-options",target:"#more-options"}),$.bindToggle({toggler:"#options-button",target:"#search-options-outer-wrapper"}),$.bindToggle({toggler:"#signInLink",target:"#signedFormWrapper"}),$.bindToggle({toggler:"#miniBasketLink",target:"#miniBasketWrapper"}),$.bindToggle({toggler:"#expandOrderOptionSupplementals",target:"#orderOptionSupplementals",hideToggleeOnLoad:"false"}),$.bindToggle({toggler:"#mega-menu-mobile",target:".mega-menu",type:"slide"}),$.customEventer({elementIdOrClass:"#tnaSearch",eventToWatch:"focus",customEventToTrigger:"toggleSearchOptionsOnce"}),$.customEventer({elementIdOrClass:"#scope-selector",eventToWatch:"click",customEventToTrigger:"toggleSearchOptions"}),$.customEventer({elementIdOrClass:".formDestinationChanger",eventToWatch:"click",customEventToTrigger:"changeFormDestination"}),$(document).on("click","#cookieCutter",function(e){e.preventDefault(),tnaSetThisCookie("dontShowCookieNotice",365),$(".cookieNotice").hide()}),$(document).on("click",".mega-menu h3",function(e){$(window).width()<480&&($(this).parents("nav").find("ul").slideToggle(),$(this).toggleClass("expanded"),e.preventDefault())}),$("#search-options-inner-wrapper").length&&($(document).on("click","#search-options-inner-wrapper h4",function(){$(this).toggleClass("expanded").next().slideToggle()}),$("#search-options-inner-wrapper .field-validation-error").length&&$("#options-button").trigger("click")),$(window).on({resize:function(){480<$(window).width()&&$(".mega-menu ul").show()}}),$(document).one("toggleSearchOptionsOnce",function(){$.toggleDisplayOfElement({toggler:"#scope-selector",togglee:"#search-options"})}),$(document).on("toggleSearchOptions",function(){$.toggleDisplayOfElement({toggler:"#scope-selector",togglee:"#search-options"}),$(document).off("toggleSearchOptionsOnce")}),$(".formDestinationChanger").on("click",function(){var e=$(this).attr("data-placeholder"),t=$(this).attr("data-target"),o=$(this).attr("data-fieldName");$.toggleDisplayOfElement({toggler:"#scope-selector",togglee:"#search-options"}),$("#tnaSearch").attr({placeholder:e,name:o}),$("#globalSearch").attr("action",t)}),$(document).on("change",".mobileSearchDestinationOption",function(){var e=$(this).attr("data-target"),t=$(this).attr("data-placeholder"),o=$(this).attr("data-fieldName");$("#mobile-search-field").attr({placeholder:t,name:o}).focus(),$("#mobile-global-search").attr("action",e)}),$(document).on("change","#sortDrop",function(){$(this).closest("form").submit()}),$(".radioLeader, .squashRadioFollowers").on("change",function(){$(".radioLeader").prop("checked")?$(".radioFollower").prop("checked",!0):$(".inRadioFollowerGroup").prop("checked",!1)}),$(".inRadioFollowerGroup").on("change",function(){$(".radioLeader").prop("checked",!0)}),function(){if(void 0!==Modernizr){var e=new Image;e.onload=e.onerror=function(){var e=this;Modernizr.addTest("datauri",function(){return 1===e.width&&1===e.height})},e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}(),$(function(){if($.polyfillPlaceholder({targetElement:"#tnaSearch"}),$.polyfillPlaceholder({targetElement:"#query"}),$("<span>",{html:"&nbsp;",id:"search-expander"}).css({position:"absolute",right:"5px"}).appendTo("#logo-holder"),tnaCheckForThisCookie("dontShowCookieNotice")||($('<div class="cookieNotice">We use cookies to improve services and ensure they work for you. Read our <a href="http://www.nationalarchives.gov.uk/legal/cookies.htm">cookie policy</a>. <a href="#" id="cookieCutter">Close</a></div>').css({padding:"5px","text-align":"center",backgroundColor:"#FCE45C",position:"fixed",bottom:0,"font-size":"14px",width:"100%",display:"none"}).appendTo("body"),setTimeout(function(){$(".cookieNotice").slideDown(1e3)},1e3)),$("#sort-form select:disabled").length){var e=$("#sort-form").find(".emphasis-block");e.remove(),e.insertAfter("#search-control-panel")}}),function(o){o.fn.newsletterBackToOrigin=function(e){var t=o.extend({},o.fn.newsletterBackToOrigin.defaults,e);return this.each(function(){var e="?oldurl="+window.location.href;return t.$element.val("http://www.nationalarchives.gov.uk/about/get-involved/newsletters/the-national-archives-newsletter/thank-you/"+e)})},o.fn.newsletterBackToOrigin.defaults={$element:o('input[name="ReturnURL"]')}}(jQuery),$("#signup").newsletterBackToOrigin(),function(n){n.fn.googleMapExternalLink=function(e,t){var o=(e+"+"+t).replace(/<[^>]*?>|[:'!,|\s]+/g,"+").replace(/\+{2,}/,"+").replace("&#39;s","s");return this.each(function(){var e=n(this),t=e.attr("href");return e.attr("href",t+"="+o)})}}(jQuery);